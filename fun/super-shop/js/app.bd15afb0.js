(function(t){function e(e){for(var n,s,i=e[0],o=e[1],u=e[2],l=0,p=[];l<i.length;l++)s=i[l],Object.prototype.hasOwnProperty.call(c,s)&&c[s]&&p.push(c[s][0]),c[s]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);d&&d(e);while(p.length)p.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,i=1;i<r.length;i++){var o=r[i];0!==c[o]&&(n=!1)}n&&(a.splice(e--,1),t=s(s.s=r[0]))}return t}var n={},c={app:0},a=[];function s(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=n,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(r,n,function(e){return t[e]}.bind(null,n));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],o=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var d=o;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"006a":function(t,e,r){"use strict";r("5ed9")},"3bdd":function(t,e,r){"use strict";r("6c87")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),c=r("2f62"),a=r("a7c6"),s=r.n(a),i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:{"has-person":t.hasPerson},attrs:{id:"app"}},[r("div",{staticClass:"people-wrapper"},[r("div",{staticClass:"hayama-section"},[r("h1",{staticClass:"hayama-section-title"},[t._v("Super Shop")]),t.hasPerson?r("div",[r("PeopleSelect"),r("div",{staticClass:"hayama-section-title hayama-alt"},[t._v(" "+t._s(t._f("currency")(t.balance))+" ("+t._s(t._f("short-currency")(t.balance))+") ")])],1):r("div",[r("p",[t._v("Who's money do you want to spend?")]),r("PeopleSelect")],1)]),r("transition",{attrs:{name:"fade",appear:""}},[t.hasPerson&&!t.isCartEmpty?r("div",{staticClass:"hayama-section"},[r("h2",{staticClass:"hayama-section-title"},[t._v(" Cart ")]),r("cart")],1):t._e()])],1),r("div",{staticClass:"products-wrapper"},[t.hasPerson?r("div",{staticClass:"hayama-section"},[r("h2",{staticClass:"hayama-section-title"},[t._v(" Products ")]),r("product-list")],1):t._e()])])},o=[],u=r("5530"),d=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("table",[r("tbody",t._l(t.cart,(function(e){return r("tr",{key:e.id},[r("td",[t._v(t._s(e.title))]),r("td",[t._v("x "+t._s(e.quantity))]),r("td",[t._v("$"+t._s(t._f("short-currency")(e.quantity*e.price)))])])})),0),r("tfoot",[r("td",{attrs:{colspan:"3"}},[t._v(" Total: "),t.total>=1e3?r("span",[t._v("$"+t._s(t._f("short-currency")(t.total)))]):r("span",[t._v(t._s(t._f("currency")(t.total)))])])])])},l=[],p={computed:Object(u["a"])({},Object(c["c"])("cart",{total:"cartTotal",cart:"cartProducts"}))},f=p,m=(r("006a"),r("2877")),h=Object(m["a"])(f,d,l,!1,null,"497bb6c2",null),b=h.exports,v=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.productsError?t._e():r("div",{staticClass:"product-list"},t._l(t.products,(function(t){return r("div",{key:t.id,staticClass:"product"},[r("ProductItem",{attrs:{product:t}})],1)})),0)])},y=[],_=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"product"},[t.product.ext?r("a",{staticClass:"product-info-link",attrs:{href:t.product.ext,target:"_blank"}},[r("svg",{staticClass:"svg-inline--fa fa-info-circle fa-w-16 fa-2x __web-inspector-hide-shortcut__",attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"info-circle",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[r("path",{attrs:{fill:"currentColor",d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"}})])]):t._e(),r("img",{staticClass:"product-image",class:{rounded:t.product.rounded},attrs:{src:t.product.image}}),r("div",{staticClass:"info"},[r("h3",{staticClass:"product-title"},[t._v(t._s(t.product.title))]),t.product.description?r("p",{staticClass:"product-description"},[t._v(t._s(t.product.description))]):t._e(),t.product.price>1e5?r("p",[t._v("$"+t._s(t._f("short-currency")(t.product.price)))]):r("p",[t._v(t._s(t._f("currency")(t.product.price)))])]),r("div",{staticClass:"actions"},[r("button",{staticClass:"button sell",class:{disabled:0===t.quantity},on:{click:function(e){return t.remProductFromCart(t.product)}}},[t._v(" SELL ")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.quantity,expression:"quantity"}],staticClass:"quantity-input",attrs:{type:"number",step:"1"},domProps:{value:t.quantity},on:{input:function(e){e.target.composing||(t.quantity=e.target.value)}}}),r("button",{staticClass:"button buy",class:{disabled:!t.hasBalanceFor(t.product,1)},on:{click:function(e){return t.addProductToCart(t.product)}}},[t._v(" BUY ")])])])},g=[],j=(r("a9e3"),{props:{product:{type:Object,default:function(){return{title:"loading..."}}}},watch:{quantity:function(t){this.hasBalanceFor(this.product,t)||(this.quantity=Math.floor(this.balance/this.product.price)+this.quantity)}},computed:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(c["c"])("cart",{cartTotal:"cartTotal"})),Object(c["c"])("people",{balance:"selectedBalance"})),{},{quantity:{get:function(){return this.$store.getters["cart/getProductQuantity"](this.product.id)},set:function(t){this.setProductQuantity({product:Object(u["a"])({},this.product),quantity:t})}}}),methods:Object(u["a"])(Object(u["a"])({},Object(c["b"])("cart",["addProductToCart","remProductFromCart","setProductQuantity"])),{},{hasBalanceFor:function(t,e){return this.balance>Number(t.price)*e}})}),O=j,P=(r("bf09"),Object(m["a"])(O,_,g,!1,null,"c69c8a28",null)),C=P.exports,w={components:{ProductItem:C},computed:Object(u["a"])({},Object(c["d"])("products",{products:"list",productsError:"lastError"})),methods:Object(u["a"])({},Object(c["b"])("products",["fetchProducts"])),created:function(){this.fetchProducts()}},x=w,q=(r("3bdd"),Object(m["a"])(x,v,y,!1,null,"42319004",null)),E=q.exports,S=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"select",class:{"has-selection":t.selected}},t._l(t.people,(function(t){return r("Person",{key:t.id,attrs:{person:t}})})),1)},L=[],k=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("a",{staticClass:"person",class:{selected:t.isSelected(t.person)},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.toggleSelectedPerson(t.person)}}},[r("img",{staticClass:"avatar",attrs:{src:t.person.avatar}}),r("span",{staticClass:"name"},[t._v(t._s(t.person.name))])])},Q=[],T={props:{person:{type:Object,default:function(){return{name:"loading...",avatar:""}}}},computed:Object(u["a"])({},Object(c["d"])("people",{selected:"selected"})),methods:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(c["b"])("people",{setSelected:"setSelected"})),Object(c["b"])("cart",{clearCart:"clear"})),{},{isSelected:function(t){return this.selected&&t.id===this.selected.id},toggleSelectedPerson:function(t){this.selected===t?(this.setSelected(null),this.clearCart()):this.setSelected(t)}})},F=T,$=(r("dd8a"),Object(m["a"])(F,k,Q,!1,null,"d5c549f8",null)),B=$.exports,I={components:{Person:B},computed:Object(u["a"])({},Object(c["d"])("people",{people:"list",lastError:"lastError",selected:"selected"})),methods:Object(u["a"])({},Object(c["b"])("people",{fetchPeople:"fetch"})),created:function(){this.fetchPeople()}},M=I,N=(r("cc2d"),Object(m["a"])(M,S,L,!1,null,"5e09de94",null)),R=N.exports,z={name:"App",components:{Cart:b,ProductList:E,PeopleSelect:R},computed:Object(u["a"])(Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(c["d"])("people",{person:"selected"})),Object(c["c"])("people",{balance:"selectedBalance"})),Object(c["c"])("cart",{isCartEmpty:"isEmpty"})),{},{hasPerson:function(){return!!this.person}})},D=z,A=(r("5c0b"),Object(m["a"])(D,i,o,!1,null,null,null)),J=A.exports,U=(r("4de4"),r("1da1")),W=(r("96cf"),r("bc3a")),Y=r.n(W),G={namespaced:!0,state:{list:[],isLoading:!1,lastError:!1},getters:{productsCount:function(t){return t.list.length}},actions:{fetchProducts:function(t){return Object(U["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,r("setLoading",!0),e.prev=2,e.next=5,Y.a.get("assets/json/products.json");case 5:n=e.sent,r("setProducts",n.data),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),r("setLastError",e.t0);case 12:return e.prev=12,r("setLoading",!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})))()}},mutations:{setProducts:function(t,e){t.list=e},setLoading:function(t,e){t.isLoading=e},setLastError:function(t,e){t.lastError=e}}},H=(r("d81d"),{namespaced:!0,state:{selected:null,list:[],isLoading:!1,lastError:!1},getters:{selectedBalance:function(t,e,r,n){return t.selected.worth-n["cart/cartTotal"]}},actions:{fetch:function(t){return Object(U["a"])(regeneratorRuntime.mark((function e(){var r,n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,r("setLoading",!0),e.prev=2,e.next=5,Y.a.get("assets/json/people.json");case 5:n=e.sent,c=n.data,r("setList",c),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),r("setLastError",e.t0);case 13:return e.prev=13,r("setLoading",!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})))()},setSelected:function(t,e){var r=t.commit;r("setSelected",e)}},mutations:{setSelected:function(t,e){t.selected=e},setList:function(t,e){t.list=e.map((function(t){var e=Number(t.worth.replaceAll(" ",""));return Object(u["a"])(Object(u["a"])({},t),{},{worth:e})}))},setLoading:function(t,e){t.isLoading=e},setLastError:function(t,e){t.lastError=e}}}),K=(r("7db0"),r("2af1"),r("13d5"),{namespaced:!0,state:{items:[]},getters:{cartProducts:function(t,e,r){return t.items.map((function(t){var e=r.products.list.find((function(e){return e.id===t.id}));return{title:e.title,price:e.price,quantity:t.quantity}})).sort((function(t,e){return Math.sign(t.price-e.price)}))},cartTotal:function(t,e){return e.cartProducts.reduce((function(t,e){return t+e.price*e.quantity}),0)},getProductQuantity:function(t){return function(e){var r=t.items.find((function(t){return t.id===e}));return r?r.quantity:0}},isEmpty:function(t){return 0===t.items.length}},actions:{addProductToCart:function(t,e){var r=t.commit,n=t.state,c=n.items.find((function(t){return t.id===e.id}));c?r("incrementItemQuantity",c):r("setProductQuantity",{id:e.id,quantity:1})},remProductFromCart:function(t,e){var r=t.commit,n=t.state,c=n.items.find((function(t){return t.id===e.id}));c&&(1===c.quantity?r("removeProductFromCart",c.id):r("decrementItemQuantity",c))},setProductQuantity:function(t,e){var r=t.commit,n=t.state,c=e.product,a=e.quantity,s=n.items.find((function(t){return t.id===c.id}));Number(a)<=0?s&&r("removeProductFromCart",s.id):r("setProductQuantity",{id:c.id,quantity:a})},clear:function(t){var e=t.commit;e("clear")}},mutations:{setProductQuantity:function(t,e){var r=e.id,n=Number(e.quantity),c=t.items.find((function(t){return t.id===r}));c?Object.assign(c,{quantity:n}):t.items.push({id:r,quantity:n})},removeProductFromCart:function(t,e){t.items=t.items.filter((function(t){return t.id!==e}))},incrementItemQuantity:function(t,e){t.items.find((function(t){return t.id===e.id})).quantity+=1},decrementItemQuantity:function(t,e){t.items.find((function(t){return t.id===e.id})).quantity-=1},clear:function(t){t.items=[]}}});n["a"].use(c["a"]),n["a"].filter("short-currency",(function(t){return t?new Intl.NumberFormat("en-US",{maximumFractionDigits:1,notation:"compact",compactDisplay:"short"}).format(t):""}));var V=new c["a"].Store({modules:{products:G,people:H,cart:K}});n["a"].use(c["a"]),n["a"].use(s.a),n["a"].config.productionTip=!1,new n["a"]({store:V,render:function(t){return t(J)}}).$mount("#app")},"5c0b":function(t,e,r){"use strict";r("9c0c")},"5ed9":function(t,e,r){},"6c87":function(t,e,r){},"9c0c":function(t,e,r){},bd5f:function(t,e,r){},beae:function(t,e,r){},bf09:function(t,e,r){"use strict";r("bd5f")},c58e:function(t,e,r){},cc2d:function(t,e,r){"use strict";r("beae")},dd8a:function(t,e,r){"use strict";r("c58e")}});
//# sourceMappingURL=app.bd15afb0.js.map